import{j as t,r as d,u as h,a as j}from"./index-D86K3tRG.js";import{f as I,h as O,i as E,g as N,P as C,T as b}from"./topic-option.styled-B68SewGI.js";import{T as A}from"./title-16lHz8HP.js";import{T as u,u as _,A as B}from"./use-localization-C43xtzzH.js";import{B as P}from"./button-DJ0Zzym0.js";import{S as y}from"./sub-title-BR7dt68j.js";const k=3,J=(i,o)=>{const c=o[4].options;return[...o.filter(n=>n.type==="bubble"&&n.title.includes(i)).flatMap(n=>n.options.map(s=>s)),...c]},M=({topic:i,onClick:o,icon:c,isSelected:l})=>t.jsxs(I,{onClick:o,$isChecked:l,children:[t.jsx(O,{src:c,alt:i}),t.jsx(E,{children:i})]}),F=(i,o)=>{const[c,l]=d.useState([]);return d.useEffect(()=>{const s=localStorage.getItem(i),r=(s?JSON.parse(s):[]).slice(0,o);l(r)},[i,o]),{selectedTopics:c,updateSelectedTopics:s=>{if(c.includes(s)){const e=c.filter(r=>r!==s);l(e),localStorage.setItem(u,JSON.stringify(e))}else{const e=[...c,s].slice(0,o);l(e),localStorage.setItem(u,JSON.stringify(e))}},setSelectedTopics:l}},z=()=>{const{pathname:i}=h(),o=j(),c=N(i),[l,n]=d.useState([]),{genericTranslation:s,selectedTranslation:e}=_(),{selectedTopics:r,updateSelectedTopics:g,setSelectedTopics:T}=F(u,k);d.useEffect(()=>{const p=localStorage.getItem(B),a=localStorage.getItem(u),f=a?JSON.parse(a):[];if(e!==null){const x=J(p,e);n(x)}T(f)},[e,T]);const S=p=>{g(p)},m=()=>{o("/loading")};return e===null||s===null?t.jsx("h1",{children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsx(C,{question:Number(c),totalQuestions:b}),t.jsxs("section",{children:[t.jsx(A,{children:e[4].title}),t.jsx(y,{children:e[4]["sub-title"]}),t.jsx("ul",{style:{marginBottom:"36px",display:"grid",justifyContent:"center",gridTemplateColumns:"repeat(auto-fill,100px)",gap:"8px"},children:l.map(({icon:p,value:a})=>t.jsx(M,{onClick:()=>S(a),topic:a,icon:p,isSelected:r.includes(a)},a))}),t.jsx(P,{selectedItems:r,onClick:m,children:s.button.next})]})]})};export{z as default};
